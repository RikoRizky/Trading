(()=>{var e={};e.id=4832,e.ids=[4832],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},83722:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var s=a(50482),r=a(69108),l=a(62563),n=a.n(l),i=a(68300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let c=["",{children:["(content)",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,35624)),"/Users/rikorizky/Documents/Aplikasi Trading/Trading/src/app/(content)/profile/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,7543)),"/Users/rikorizky/Documents/Aplikasi Trading/Trading/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/rikorizky/Documents/Aplikasi Trading/Trading/src/app/(content)/profile/page.tsx"],u="/(content)/profile/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(content)/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},62494:(e,t,a)=>{Promise.resolve().then(a.bind(a,10700))},10700:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(95344),r=a(26215),l=a(3729),n=a(73890);let i=l.forwardRef(function({title:e,titleId:t,...a},s){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});var o=a(23952),c=a(44596),d=a(97602),u=a(98138);let m=l.forwardRef(function({title:e,titleId:t,...a},s){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))});var x=a(25750);function p(){let{user:e}=(0,r.useAuth)(),t=(0,n.e)(),[a,p]=(0,l.useState)(null),[f,h]=(0,l.useState)(!1),[g,b]=(0,l.useState)(!1),[w,y]=(0,l.useState)(!1),[j,v]=(0,l.useState)(""),[k,N]=(0,l.useState)(""),[_,E]=(0,l.useState)(""),[P,C]=(0,l.useState)(null),[q,S]=(0,l.useState)(!1),[U,Z]=(0,l.useState)("");(0,l.useEffect)(()=>{a&&v(a.full_name||"")},[a]),(0,l.useEffect)(()=>{e&&(async()=>{let{data:a,error:s}=await t.from("profiles").select("full_name, avatar_url, profile_photo, membership_type").eq("id",e.id).single();s||p(a)})()},[e,t]);let B=async()=>{if(!j.trim()){Z("Nama tidak boleh kosong");return}S(!0),Z("");let{error:e}=await (0,x.ck)({full_name:j.trim()});e?Z("Gagal mengupdate nama: "+e.message):(Z("Nama berhasil diupdate!"),p({...a,full_name:j.trim()}),h(!1)),S(!1)},K=async()=>{if(!P){Z("Pilih file gambar terlebih dahulu");return}S(!0),Z("");try{let s=P.name.split(".").pop(),r=`${e.id}_${Date.now()}.${s}`,{data:l,error:n}=await t.storage.from("avatars").upload(r,P);if(n)throw n;let{data:{publicUrl:i}}=t.storage.from("avatars").getPublicUrl(r),{error:o}=await (0,x.ck)({avatar_url:i});if(o)throw o;Z("Foto profil berhasil diupdate!"),p({...a,avatar_url:i}),b(!1),C(null)}catch(e){Z("Gagal mengupload foto: "+e.message)}S(!1)},L=async()=>{if(!k){Z("Kata sandi baru tidak boleh kosong");return}if(k!==_){Z("Konfirmasi kata sandi tidak cocok");return}if(k.length<6){Z("Kata sandi minimal 6 karakter");return}S(!0),Z("");let{error:e}=await (0,x.gQ)(k);e?Z("Gagal mengupdate kata sandi: "+e.message):(Z("Kata sandi berhasil diupdate!"),y(!1),N(""),E("")),S(!1)};return e?(0,s.jsxs)("div",{className:"w-full max-w-6xl mx-auto px-6 py-10",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),U&&s.jsx("div",{className:`mb-6 p-4 rounded-md ${U.includes("berhasil")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U}),(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Foto Profil"}),(0,s.jsxs)("button",{onClick:()=>b(!g),className:"flex items-center badge badge-warning space-x-2 text-blue-600 hover:text-blue-800",children:[s.jsx(i,{className:"h-5 w-5"}),s.jsx("span",{children:g?"Batal":"Ubah"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[a?.avatar_url?s.jsx("img",{src:a.avatar_url,alt:a.full_name||"User",className:"w-24 h-24 rounded-full border shadow"}):s.jsx(o.Z,{className:"h-24 w-24 text-primary-600"}),g&&(0,s.jsxs)("div",{className:"flex-1 max-w-md",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:e=>C(e.target.files?.[0]||null),className:"block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,s.jsxs)("div",{className:"flex space-x-2 mt-3",children:[(0,s.jsxs)("button",{onClick:K,disabled:q,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(c.Z,{className:"h-4 w-4"}),s.jsx("span",{children:q?"Menyimpan...":"Simpan"})]}),(0,s.jsxs)("button",{onClick:()=>{b(!1),C(null)},className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:[s.jsx(d.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Batal"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Informasi Profil"}),(0,s.jsxs)("button",{onClick:()=>h(!f),className:"flex items-center badge badge-warning space-x-2 text-blue-600 hover:text-blue-800",children:[s.jsx(u.Z,{className:"h-5 w-5"}),s.jsx("span",{children:f?"Batal":"Ubah"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nama Lengkap"}),f?(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:j,onChange:e=>v(e.target.value),className:"flex-1 px-3 py-2 border bg-black bg-opacity-50 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan nama lengkap"}),(0,s.jsxs)("button",{onClick:B,disabled:q,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(c.Z,{className:"h-4 w-4"}),s.jsx("span",{children:q?"Menyimpan...":"Simpan"})]}),(0,s.jsxs)("button",{onClick:()=>{h(!1),v(a?.full_name||"")},className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:[s.jsx(d.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Batal"})]})]}):s.jsx("p",{className:"text-lg",children:a?.full_name||"Belum diatur"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),s.jsx("p",{className:"text-lg",children:e.email})]}),a?.membership_type&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status Keanggotaan"}),"premium"===a.membership_type?s.jsx("span",{className:"inline-block px-4 py-1.5 text-sm font-medium rounded-full bg-yellow-100 text-yellow-800",children:"⭐ PREMIUM"}):(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"inline-block px-4 py-1.5 text-sm font-medium rounded-full bg-gray-100 text-gray-800",children:"FREE"}),(0,s.jsxs)("button",{onClick:()=>window.open("/upgrade","_blank"),className:"inline-block px-6 py-2 text-sm font-medium rounded-full bg-gradient-to-r from-yellow-400 to-yellow-600 text-white hover:from-yellow-500 hover:to-yellow-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[s.jsx("span",{className:"mr-2",children:"⭐"})," Upgrade to Premium"]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Keamanan"}),(0,s.jsxs)("button",{onClick:()=>y(!w),className:"flex items-center space-x-2 badge badge-warning text-blue-600 hover:text-blue-800",children:[s.jsx(m,{className:"h-5 w-5"}),s.jsx("span",{children:w?"Batal":"Ubah Kata Sandi"})]})]}),w&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Kata Sandi Baru"}),s.jsx("input",{type:"password",value:k,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border bg-black bg-opacity-50 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan kata sandi baru"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Konfirmasi Kata Sandi"}),s.jsx("input",{type:"password",value:_,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 border bg-black bg-opacity-50 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Konfirmasi kata sandi baru"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:L,disabled:q,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(c.Z,{className:"h-4 w-4"}),s.jsx("span",{children:q?"Mengupdate...":"Update Kata Sandi"})]}),(0,s.jsxs)("button",{onClick:()=>{y(!1),N(""),E("")},className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:[s.jsx(d.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"Batal"})]})]})]})]})]}):s.jsx("div",{className:"flex items-center justify-center h-[80vh]"})}},25750:(e,t,a)=>{"use strict";a.d(t,{GJ:()=>m,Kq:()=>x,c0:()=>u,ck:()=>c,gQ:()=>d,kv:()=>p,qj:()=>i,w7:()=>o,y1:()=>l,zB:()=>n});var s=a(73890);async function r(){let e=(0,s.e)();try{let{data:t,error:a}=await e.auth.getUser(),s=t?.user;if(a||!s)return{user:null,profile:null};let{data:r,error:l}=await e.from("profiles").select("*").eq("id",s.id).single();if(l)return console.error("Failed to fetch profile:",l),{user:s,profile:null};return{user:s,profile:r}}catch(e){return console.error("getCurrentUser() failed:",e),{user:null,profile:null}}}async function l(e,t,a){let r=(0,s.e)();return await r.auth.signUp({email:e,password:t,options:{data:{full_name:a},emailRedirectTo:`${location.origin}/auth/callback`}})}async function n(e,t){let a=(0,s.e)(),{data:r,error:l}=await a.auth.signInWithPassword({email:e,password:t});if(l)throw l;if(r.user&&null===r.user.email_confirmed_at)throw Error("Email belum diverifikasi. Silakan cek inbox.");return r}async function i(){let e=(0,s.e)();return await e.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}})}async function o(){let e=(0,s.e)();return await e.auth.signOut()}async function c(e){let t=(0,s.e)(),{data:a,error:r}=await t.auth.getUser(),l=a?.user;return r||!l?{error:r||Error("No authenticated user")}:await t.from("profiles").update(e).eq("id",l.id).select().single()}async function d(e){let t=(0,s.e)();return await t.auth.updateUser({password:e})}async function u(e){let t=(0,s.e)();return await t.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/auth/reset-password`})}async function m(){let{profile:e}=await r();return!!e?.is_admin}async function x(e){let t=(0,s.e)();return await t.from("profiles").update({is_admin:!0}).eq("id",e)}async function p(e){let t=(0,s.e)();return await t.from("profiles").update({is_admin:!1}).eq("id",e)}},35624:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>n});let s=(0,a(86843).createProxy)(String.raw`/Users/rikorizky/Documents/Aplikasi Trading/Trading/src/app/(content)/profile/page.tsx`),{__esModule:r,$$typeof:l}=s,n=s.default},44596:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(3729);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})},98138:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(3729);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[6225,9249,5631],()=>a(83722));module.exports=s})();