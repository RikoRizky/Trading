(()=>{var e={};e.id=1406,e.ids=[1406],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},1888:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var a=s(50482),r=s(69108),l=s(62563),i=s.n(l),n=s(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["(content)",{children:["blog",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,67056)),"D:\\PROJECT VSC\\Trading (1)\\Trading\\src\\app\\(content)\\blog\\page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7543)),"D:\\PROJECT VSC\\Trading (1)\\Trading\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\PROJECT VSC\\Trading (1)\\Trading\\src\\app\\(content)\\blog\\page.tsx"],m="/(content)/blog/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(content)/blog/page",pathname:"/blog",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},51019:(e,t,s)=>{Promise.resolve().then(s.bind(s,94560))},94560:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(95344),r=s(3729),l=s(20783),i=s.n(l),n=s(73890),o=s(11453),c=s(26215),d=s(90104),m=s(43823),u=s(15965),x=s(28230),g=s(23952),h=s(7902);function p(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[p,b]=(0,r.useState)(""),[v,f]=(0,r.useState)("all"),[j,y]=(0,r.useState)([]),[N,w]=(0,r.useState)(!1),[S,k]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1),[_,E]=(0,r.useState)(!1),[U,q]=(0,r.useState)(""),[T,A]=(0,r.useState)(null),[V,D]=(0,r.useState)(""),[M,$]=(0,r.useState)("trading-basics"),[L,Z]=(0,r.useState)(null),[R,O]=(0,r.useState)(void 0),[F,I]=(0,r.useState)(!1),[G,J]=(0,r.useState)(!1),[B,z]=(0,r.useState)(!1),{profile:W}=(0,c.useAuth)(),H=[{value:"all",label:"All Articles",count:0},{value:"trading-basics",label:"Trading Basics",count:0},{value:"technical-analysis",label:"Technical Analysis",count:0},{value:"fundamental-analysis",label:"Fundamental Analysis",count:0},{value:"risk-management",label:"Risk Management",count:0},{value:"psychology",label:"Trading Psychology",count:0},{value:"strategies",label:"Trading Strategies",count:0},{value:"tools",label:"Trading Tools",count:0}];(0,r.useEffect)(()=>{try{let e=document.cookie.split(";").map(e=>e.trim()).some(e=>e.startsWith("recovery="));E(e)}catch{}K(),X()},[]),(0,r.useEffect)(()=>{Q()},[e,p,v]);let X=async()=>{try{if(_){w(!1),k(!1),P(!1);return}let e=(0,n.e)(),{data:t}=await e.auth.getUser();if(t.user){P(!0);let{data:s}=await e.from("profiles").select("is_admin, membership_type").eq("id",t.user.id).single();w(s?.is_admin||!1),k(s?.membership_type==="premium")}else P(!1),w(!1),k(!1)}catch(e){console.error("Error checking user status:",e)}},K=async()=>{try{let e=(0,n.e)(),{data:s,error:a}=await e.from("posts").select(`
          *,
          author:profiles(*)
        `).eq("type","article").eq("status","published").order("published_at",{ascending:!1});a?(console.error("Error fetching posts:",a),t([])):t(s||[])}catch(e){console.error("Error in fetchPosts:",e),t([])}finally{l(!1)}},Q=()=>{let e=en;p&&(e=e.filter(e=>e.title.toLowerCase().includes(p.toLowerCase())||e.excerpt?.toLowerCase().includes(p.toLowerCase())||e.content.toLowerCase().includes(p.toLowerCase()))),"all"!==v&&(e=e.filter(e=>e.tags?.includes(v))),y(e)},Y=e=>"all"===e?en.length:en.filter(t=>t.tags?.includes(e)).length,ee=e=>e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),et=e=>["video",e],es=async()=>{if(N&&U&&T){z(!0);try{console.log("=== Starting premium video upload ==="),console.log("Form data:",{premiumVideoTitle:U,premiumVideoFile:T,premiumVideoDescription:V,premiumVideoCategory:M});let e=(0,n.e)();console.log("Supabase client created");let{data:t,error:s}=await e.auth.getUser();if(console.log("User response:",{userResp:t,userError:s}),s)throw Error("Auth error: "+s.message);let a=t.user?.id;if(!a)throw Error("Not authenticated - no user ID");console.log("User ID:",a);let r=T.name.split(".").pop(),l=`${a}-${Date.now()}.${r}`;console.log("Uploading file:",l);let{data:i,error:o}=await e.storage.from("videos").upload(l,T);if(o)throw Error(`Upload error: ${o.message}`);console.log("File uploaded successfully:",i);let{data:c}=e.storage.from("videos").getPublicUrl(l),d=c.publicUrl;console.log("Video URL:",d);let m=`${ee(U)}-${Math.random().toString(36).slice(2,8)}`,u=et(M),x={title:U,slug:m,content:"",excerpt:V,type:"article",status:"published",is_premium:!0,author_id:a,tags:u,metadata:{video_url:d,video_type:"file"},published_at:new Date().toISOString()};console.log("Inserting premium video data:",x);let{data:g,error:h}=await e.from("posts").insert(x).select().single();if(h)throw Error(`Database error: ${h.message}`);if(!g)throw Error("No data returned from insert");console.log("Premium video uploaded successfully:",g),q(""),A(null),D(""),$("trading-basics"),console.log("Refreshing posts..."),await K(),alert("Video premium berhasil ditambahkan!")}catch(t){console.error("Add premium video failed:",t);let e=t instanceof Error?t.message:"Unknown error";alert("Gagal menambahkan video premium: "+e)}finally{z(!1)}}},ea=e=>{Z(e),O("premium"),q(e.title),D(e.excerpt||""),$(e.tags?.find(e=>"video"!==e)||"trading-basics"),I(!0)},er=async e=>{if(N&&confirm("Are you sure you want to delete this video?"))try{let t=(0,n.e)(),{error:s}=await t.from("posts").delete().eq("id",e);if(s)throw Error(`Database error: ${s.message}`);alert("Video deleted successfully!"),await K()}catch(t){console.error("Delete video failed:",t);let e=t instanceof Error?t.message:"Unknown error";alert("Failed to delete video: "+e)}},el=async()=>{if(N&&L){z(!0);try{let e=(0,n.e)(),{data:t,error:s}=await e.auth.getUser();if(s)throw Error("Auth error: "+s.message);if(!t.user?.id)throw Error("Not authenticated");let a={title:U,excerpt:V,tags:et(M),updated_at:new Date().toISOString()},{error:r}=await e.from("posts").update(a).eq("id",L.id);if(r)throw Error(`Database error: ${r.message}`);alert("Video berhasil diperbarui!"),Z(null),O(void 0),I(!1),q(""),A(null),D(""),$("trading-basics"),await K()}catch(t){console.error("Update video failed:",t);let e=t instanceof Error?t.message:"Unknown error";alert("Gagal memperbarui video: "+e)}finally{z(!1)}}},ei=()=>{Z(null),O(void 0),I(!1),q(""),A(null),D(""),$("trading-basics")},en=e.filter(e=>e.is_premium&&e.metadata?.video_url);return s?a.jsx("div",{className:"min-h-screen pb-12 bg-gradient-to-r from-indigoSteel-dark via-indigoSteel-light to-indigoSteel-dark overflow-x-hidden",children:a.jsx("div",{className:"container",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(6)].map((e,t)=>(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("div",{className:"h-48 bg-gray-200 rounded mb-4"}),a.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},t))})]})})}):(0,a.jsxs)("div",{className:"min-h-screen py-12 bg-gradient-to-r from-indigoSteel-dark via-indigoSteel-light to-indigoSteel-dark overflow-x-hidden",children:[(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[a.jsx(m.Z,{className:"h-8 w-8 text-primary-600 mr-3"}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Trading Blog"}),a.jsx("span",{className:"ml-4 badge badge-warning",children:"Premium Content"})]}),(0,a.jsxs)("p",{className:"text-xl text-gray-300 max-w-3xl",children:["Premium trading content and exclusive video tutorials.",(0,a.jsxs)("span",{className:"text-yellow-600 font-medium",children:[" ","Upgrade to premium to access all content!"]})]})]}),a.jsx("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search premium content...",value:p,onChange:e=>b(e.target.value),className:"input pl-10"})]})}),a.jsx("div",{className:"lg:w-48",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("select",{value:v,onChange:e=>f(e.target.value),className:"input pl-10 appearance-none",children:H.map(e=>(0,a.jsxs)("option",{className:"bg-black bg-opacity-80",value:e.value,children:[e.label," (",Y(e.value),")"]},e.value))})]})})]})}),a.jsx("div",{className:"mb-6",children:(0,a.jsxs)("p",{className:"text-gray-300",children:["Showing ",j.length," of ",en.length," premium videos"]})}),N&&(0,a.jsxs)("div",{className:"card p-6 mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Premium Video (Admin Only)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Title"}),a.jsx("input",{type:"text",className:"input",value:U,onChange:e=>q(e.target.value),placeholder:"Video title"})]}),(0,a.jsxs)("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Video File"}),a.jsx("input",{type:"file",accept:"video/*",className:"input",onChange:e=>A(e.target.files?.[0]||null),disabled:null!==L&&"premium"===R}),a.jsx("p",{className:"text-xs text-gray-300 mt-1",children:L&&"premium"===R?"File cannot be changed while editing":"Upload a video file (MP4, AVI, MOV, etc.)"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Description"}),a.jsx("textarea",{className:"input",rows:3,value:V,onChange:e=>D(e.target.value),placeholder:"Short description about this video..."})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Category"}),a.jsx("select",{className:"input",value:M,onChange:e=>$(e.target.value),children:H.slice(1).map(e=>a.jsx("option",{className:"bg-black bg-opacity-80",value:e.value,children:e.label},e.value))})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{className:"btn btn-primary",onClick:es,disabled:B,children:B?"Saving...":"Add Premium Video"})}),a.jsx("p",{className:"text-xs text-gray-300 mt-2",children:"Premium videos are visible only to premium users."})]}),en.length>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:(j.length>0?G?j:j.slice(0,6):[]).map(e=>{let t=e.metadata?.video_url;return(0,a.jsxs)("article",{className:"card overflow-hidden hover:shadow-lg transition-shadow relative",children:[a.jsx("div",{className:"aspect-video bg-gray-200 relative",children:S?a.jsx("video",{src:t,className:"w-full h-full object-cover",controls:!0}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("video",{src:t,className:"w-full h-full object-cover filter blur-sm",muted:!0,loop:!0,style:{filter:"blur(8px)"}}),a.jsx(i(),{href:"/upgrade",className:"absolute inset-0",children:a.jsx(d.Z,{isAuthenticated:!0,isPremiumUser:!1,title:"Premium Content",description:"Upgrade to Premium to watch this video",buttonText:"Upgrade Now",buttonHref:"/upgrade"})})]})}),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[a.jsx("span",{className:"bg-yellow-500 text-white text-xs px-2 py-1 rounded-full mr-2",children:"PREMIUM"}),a.jsx("span",{className:"text-xs text-gray-300",children:S?"Premium content":"Upgrade required"})]}),a.jsx(i(),{href:S?`/videos/${e.slug}`:"/upgrade",className:"block",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 hover:text-primary-700",children:e.title})}),e.excerpt?a.jsx("p",{className:"text-sm text-gray-300 line-clamp-2",children:e.excerpt}):null,(0,a.jsxs)("div",{className:"mt-2 flex items-center text-xs text-gray-900",children:[a.jsx(g.Z,{className:"h-3 w-3 mr-1"}),e.author?.full_name||"Admin",a.jsx(h.Z,{className:"h-3 w-3 ml-3 mr-1"}),(0,o.p6)(e.published_at||e.created_at)]}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:e.tags.slice(0,3).map(e=>a.jsx("span",{className:"text-xs badge badge-warning text-yellow-900 px-2 py-1 rounded",children:e.replace("-"," ")},e))}),N&&(0,a.jsxs)("div",{className:"mt-4 flex gap-2",children:[a.jsx("button",{onClick:()=>ea(e),className:"btn btn-outline btn-sm",children:"Edit"}),a.jsx("button",{onClick:()=>er(e.id),className:"btn btn-outline btn-sm text-red-600 hover:bg-red-50",children:"Delete"})]})]})]},`premium-video-${e.id}`)})}),0===j.length&&a.jsx("div",{className:"text-center text-gray-300 mt-4",children:"No results match your filters."}),j.length>6&&a.jsx("div",{className:"text-center mt-8",children:a.jsx("button",{onClick:()=>{J(!G)},className:"btn btn-outline",children:G?"Show Less":`See All (${j.length} videos)`})})]}):a.jsx("div",{className:"py-12",children:S?a.jsx("div",{className:"text-center text-gray-300",children:"No premium videos yet."}):a.jsx(i(),{href:"/upgrade",className:"block max-w-3xl mx-auto rounded-lg overflow-hidden shadow hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"relative bg-gradient-to-r from-gray-800 to-gray-700 text-white p-10 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(m.Z,{className:"h-8 w-8 text-white"})}),a.jsx("div",{className:"text-2xl font-bold mb-2",children:"Premium Content"}),a.jsx("div",{className:"text-sm opacity-90 mb-4",children:"Upgrade to access all premium trading videos."}),a.jsx("span",{className:"btn btn-primary btn-sm",children:"Upgrade Now"})]})})})]}),F&&L&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-black bg-opacity-50 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-grey-300",children:"Edit Premium Video"}),a.jsx("button",{onClick:ei,className:"text-gray-400 hover:text-gray-300",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-grey-300 mb-1",children:"Title"}),a.jsx("input",{type:"text",className:"input w-full",value:U,onChange:e=>q(e.target.value),placeholder:"Video title"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-grey-300 mb-1",children:"Description"}),a.jsx("textarea",{className:"input w-full",rows:3,value:V,onChange:e=>D(e.target.value),placeholder:"Short description about this video..."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-grey-300 mb-1",children:"Category"}),a.jsx("select",{className:"input w-full",value:M,onChange:e=>$(e.target.value),children:H.slice(1).map(e=>a.jsx("option",{className:"bg-black bg-opacity-80",value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:el,className:"btn btn-primary flex-1",disabled:B,children:B?"Saving...":"Update Video"}),a.jsx("button",{onClick:ei,className:"btn btn-outline flex-1",children:"Cancel"})]})]})})})]})}},90104:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(95344),r=s(20783),l=s.n(r),i=s(43823);function n({isAuthenticated:e,isPremiumUser:t=!1,className:s="",showIcon:r=!0,title:n,description:o,buttonText:c,buttonHref:d}){return a.jsx("div",{className:`absolute inset-0 bg-black/60 flex items-center justify-center ${s}`,children:(0,a.jsxs)("div",{className:"text-center text-white p-6",children:[r&&a.jsx("div",{className:"w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(i.Z,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:n||(e?"Premium Content":"Login Required")}),a.jsx("p",{className:"text-sm mb-4 opacity-90",children:o||(e?"Upgrade to Premium to watch this video":"Please login to watch this video")}),a.jsx(l(),{href:d||(e?"/upgrade":"/login"),className:"btn btn-primary btn-sm",children:c||(e?"Upgrade Now":"Login")})]})})}},11453:(e,t,s)=>{"use strict";s.d(t,{p6:()=>l});var a=s(55346),r=s(63127);function l(e,t="MMM dd, yyyy"){try{let s="string"==typeof e?(0,a.Z)(e):e;return(0,r.Z)(s,t)}catch(e){return console.error("Error formatting date:",e),"Invalid date"}}},67056:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,s(86843).createProxy)(String.raw`D:\PROJECT VSC\Trading (1)\Trading\src\app\(content)\blog\page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[6225,9159,2099,4084],()=>s(1888));module.exports=a})();