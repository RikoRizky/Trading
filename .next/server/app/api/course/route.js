"use strict";(()=>{var e={};e.id=378,e.ids=[378],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},3370:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>j,patchFetch:()=>k,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>h});var s={};r.r(s),r.d(s,{GET:()=>l,POST:()=>d});var a=r(95419),o=r(69108),n=r(99678),i=r(78070),u=r(57699),c=r(32455);async function l(){let e=(0,u.createRouteHandlerClient)({cookies:c.cookies}),{data:t,error:r}=await e.from("courses").select("*").order("created_at",{ascending:!1});return r?i.Z.json({error:r.message},{status:500}):i.Z.json(t)}async function d(e){let t=(0,u.createRouteHandlerClient)({cookies:c.cookies}),{title:r,slug:s,description:a,thumbnail_url:o,price:n,is_published:l}=await e.json().catch(()=>({}));if(!r||!s)return i.Z.json({error:"title dan slug wajib"},{status:400});let{data:d}=await t.auth.getUser(),p=d?.user;if(!p)return i.Z.json({error:"Unauthorized"},{status:401});let{data:m,error:g}=await t.from("profiles").select("is_admin").eq("id",p.id).single();if(g||!m?.is_admin)return i.Z.json({error:"Forbidden: admin only"},{status:403});let{data:x,error:f}=await t.from("courses").insert([{title:r,slug:s,description:a??null,thumbnail_url:o??null,price:n??null,is_published:!!l,updated_at:null}]);return f?i.Z.json({error:f.message},{status:500}):i.Z.json(x,{status:201})}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/course/route",pathname:"/api/course",filename:"route",bundlePath:"app/api/course/route"},resolvedPagePath:"/Users/rikorizky/Documents/Aplikasi Trading/Trading/src/app/api/course/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:x,headerHooks:f,staticGenerationBailout:h}=p,j="/api/course/route";function k(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[6225,6349,6206],()=>r(3370));module.exports=s})();