(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{5639:function(e,r,t){Promise.resolve().then(t.bind(t,8414))},8414:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var a=t(7437),s=t(2265),n=t(1396),i=t.n(n),l=t(4033),o=t(1865),c=t(8793),u=t(5925),d=t(1543),m=t(9367);function f(){let[e,r]=(0,s.useState)(!1),[t,n]=(0,s.useState)(!1),[f,p]=(0,s.useState)(!1),h=(0,l.useRouter)(),{register:x,handleSubmit:w,watch:g,formState:{errors:y}}=(0,o.cI)(),j=g("password"),v=async e=>{r(!0);try{let{data:r,error:t}=await (0,c.y1)(e.email,e.password,e.fullName);if(t){u.toast.error(t.message);return}u.toast.success("Account created! Please verify your email."),h.push("/login")}catch(e){console.error("REGISTER ERROR:",e),u.toast.error(e instanceof Error?e.message:"Unexpected error")}finally{r(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-indigoSteel-dark via-indigoSteel-light to-indigoSteel-dark py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Create your account"}),(0,a.jsxs)("p",{className:"mt-2 text-center text-sm text-white/80",children:["Or"," ",(0,a.jsx)(i(),{href:"/login",className:"font-medium text-primary-400 hover:text-primary-300",children:"sign in to your existing account"})]})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:w(v),children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"fullName",className:"form-label",children:"Full Name"}),(0,a.jsx)("input",{...x("fullName",{required:"Full name is required",minLength:{value:2,message:"Full name must be at least 2 characters"}}),type:"text",autoComplete:"name",className:"input",placeholder:"Enter your full name"}),y.fullName&&(0,a.jsx)("p",{className:"form-error",children:y.fullName.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email address"}),(0,a.jsx)("input",{...x("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email address"}}),type:"email",autoComplete:"email",className:"input",placeholder:"Enter your email"}),y.email&&(0,a.jsx)("p",{className:"form-error",children:y.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...x("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"Password must contain at least one uppercase letter, one lowercase letter, and one number"}}),type:t?"text":"password",autoComplete:"new-password",className:"input pr-10",placeholder:"Create a password"}),(0,a.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!t),children:t?(0,a.jsx)(d.Z,{className:"h-5 w-5 text-gray-400"}):(0,a.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"})})]}),y.password&&(0,a.jsx)("p",{className:"form-error",children:y.password.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...x("confirmPassword",{required:"Please confirm your password",validate:e=>e===j||"Passwords do not match"}),type:f?"text":"password",autoComplete:"new-password",className:"input pr-10",placeholder:"Confirm your password"}),(0,a.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>p(!f),children:f?(0,a.jsx)(d.Z,{className:"h-5 w-5 text-gray-400"}):(0,a.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"})})]}),y.confirmPassword&&(0,a.jsx)("p",{className:"form-error",children:y.confirmPassword.message})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{...x("agreeToTerms",{required:"You must agree to the terms and conditions"}),id:"agreeToTerms",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,a.jsxs)("label",{htmlFor:"agreeToTerms",className:"ml-2 block text-sm text-white/80",children:["I agree to the"," ",(0,a.jsx)(i(),{href:"/terms",className:"text-primary-400 hover:text-primary-300",children:"Terms of Service"})," ","and"," ",(0,a.jsx)(i(),{href:"/privacy",className:"text-primary-400 hover:text-primary-300",children:"Privacy Policy"})]})]}),y.agreeToTerms&&(0,a.jsx)("p",{className:"form-error",children:y.agreeToTerms.message}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:e,className:"btn btn-primary btn-lg w-full",children:e?"Creating account...":"Create account"})})]})]})})}},8793:function(e,r,t){"use strict";t.d(r,{GJ:function(){return m},Kq:function(){return f},c0:function(){return d},ck:function(){return c},gQ:function(){return u},kv:function(){return p},qj:function(){return l},w7:function(){return o},y1:function(){return n},zB:function(){return i}});var a=t(1097);async function s(){let e=(0,a.e)();try{let{data:r,error:t}=await e.auth.getUser(),a=null==r?void 0:r.user;if(t||!a)return{user:null,profile:null};let{data:s,error:n}=await e.from("profiles").select("*").eq("id",a.id).single();if(n)return console.error("Failed to fetch profile:",n),{user:a,profile:null};return{user:a,profile:s}}catch(e){return console.error("getCurrentUser() failed:",e),{user:null,profile:null}}}async function n(e,r,t){let s=(0,a.e)();return await s.auth.signUp({email:e,password:r,options:{data:{full_name:t},emailRedirectTo:"".concat(location.origin,"/auth/callback")}})}async function i(e,r){let t=(0,a.e)(),{data:s,error:n}=await t.auth.signInWithPassword({email:e,password:r});if(n)throw n;if(s.user&&null===s.user.email_confirmed_at)throw Error("Email belum diverifikasi. Silakan cek inbox.");return s}async function l(){let e=(0,a.e)();return await e.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}})}async function o(){let e=(0,a.e)();return await e.auth.signOut()}async function c(e){let r=(0,a.e)(),{data:t,error:s}=await r.auth.getUser(),n=null==t?void 0:t.user;return s||!n?{error:s||Error("No authenticated user")}:await r.from("profiles").update(e).eq("id",n.id).select().single()}async function u(e){let r=(0,a.e)();return await r.auth.updateUser({password:e})}async function d(e){let r=(0,a.e)();return await r.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/auth/reset-password")})}async function m(){let{profile:e}=await s();return!!(null==e?void 0:e.is_admin)}async function f(e){let r=(0,a.e)();return await r.from("profiles").update({is_admin:!0}).eq("id",e)}async function p(e){let r=(0,a.e)();return await r.from("profiles").update({is_admin:!1}).eq("id",e)}},1097:function(e,r,t){"use strict";t.d(r,{e:function(){return s}});var a=t(3082);let s=()=>(0,a.createClientComponentClient)()},1396:function(e,r,t){e.exports=t(5250)},4033:function(e,r,t){e.exports=t(5313)},9367:function(e,r,t){"use strict";var a=t(2265);let s=a.forwardRef(function({title:e,titleId:r,...t},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});r.Z=s},1543:function(e,r,t){"use strict";var a=t(2265);let s=a.forwardRef(function({title:e,titleId:r,...t},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))});r.Z=s}},function(e){e.O(0,[872,82,250,279,971,938,744],function(){return e(e.s=5639)}),_N_E=e.O()}]);