(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9502:function(e,s,t){Promise.resolve().then(t.t.bind(t,5250,23)),Promise.resolve().then(t.t.bind(t,3649,23)),Promise.resolve().then(t.bind(t,5925)),Promise.resolve().then(t.t.bind(t,3385,23)),Promise.resolve().then(t.bind(t,5211)),Promise.resolve().then(t.bind(t,1122))},5211:function(e,s,t){"use strict";t.r(s),t.d(s,{Navbar:function(){return w}});var r=t(7437),i=t(2265),n=t(1396),a=t.n(n),l=t(6691),o=t.n(l),c=t(1122),d=t(5375),h=t(1615),u=t(1809),m=t(9010),x=t(6602),f=t(5518),b=t(6689),p=t(9874),v=t(4033);let g=(0,t(7440).eI)("https://fkpajnzopbavijpcsnkr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrcGFqbnpvcGJhdmlqcGNzbmtyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4NzAyOTIsImV4cCI6MjA3MzQ0NjI5Mn0.ibxvB4_6ohteqN-yzfuGcT6Okx_oGhXbqaQ1xsCPEkY");function w(){let[e,s]=(0,i.useState)(!1),{user:t,profile:n,loading:l,signOut:w}=(0,c.useAuth)(),[N,j]=(0,i.useState)(!1),[y,k]=(0,i.useState)(!1),[_,I]=(0,i.useState)("/"),E=(0,v.usePathname)(),C=(0,v.useRouter)(),S=()=>(null==n?void 0:n.is_admin)?"Admin":(null==n?void 0:n.membership_type)==="premium"?"Premium":"Gratis",P=()=>{n&&(n.is_admin?C.push("/admin"):C.push("/"))};(0,i.useEffect)(()=>{try{let e=document.cookie.split(";").map(e=>e.trim()).some(e=>e.startsWith("recovery="));k(e)}catch(e){}let e=()=>{j(window.scrollY>20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,i.useEffect)(()=>{(async function(){if(!t)return;let{data:e}=await g.from("profiles").select("is_admin").eq("id",t.id).single();(null==e?void 0:e.is_admin)?I("/admin"):I("/")})()},[t]);let Z=[{name:"Dashboard",href:_,icon:d.Z},{name:"Blog",href:"/blog",icon:d.Z},{name:"Lessons",href:"/lessons",icon:d.Z},{name:"Community",href:"/community",icon:h.Z},{name:"AI",href:"/ai",icon:h.Z}],O=async()=>{try{await w()}catch(e){console.error("Error signing out:",e)}};return(0,r.jsx)("nav",{className:"\n        fixed top-0 left-0 w-full z-50 transition-all duration-500\n        ".concat(N?"backdrop-blur-sm bg-black/40 shadow-md":"bg-transparent","\n      "),children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center h-28",children:[(0,r.jsx)(a(),{href:"/",className:"flex items-center",children:(0,r.jsx)(o(),{src:"/TP_name-removebg-preview.png",alt:"Logo",width:125,height:95,className:"transition-all duration-300"})}),(0,r.jsx)("div",{className:"hidden md:flex ml-40 space-x-8",children:Z.map(e=>{let s=E===e.href||"/dashboard"===e.href&&E.startsWith("/dashboard");return(0,r.jsxs)("button",{onClick:()=>C.push(e.href),className:"\n                    text-lg font-medium transition-all duration-200 relative\n                    ".concat(s?"text-white font-semibold":"text-gray-300","\n                    hover:text-white\n                  "),children:[e.name,s&&(0,r.jsx)("div",{className:"absolute -bottom-1 left-0 right-0 h-0.5 bg-white rounded-full"})]},e.name)})}),(0,r.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:l?(0,r.jsx)("div",{className:"bg-gray-300 h-8 w-20 rounded animate-pulse"}):t&&!y?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("button",{className:"flex items-center space-x-2 text-gray-100",children:[(0,r.jsx)("div",{className:"h-9 w-9 rounded-full bg-white/20 flex items-center justify-center",children:(null==n?void 0:n.avatar_url)?(0,r.jsx)("img",{src:n.avatar_url,className:"h-9 w-9 rounded-full",alt:"Avatar"}):(0,r.jsx)(u.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"flex flex-col items-start",children:[(0,r.jsx)("span",{children:(null==n?void 0:n.full_name)||"User"}),(0,r.jsx)("span",{className:"text-xs text-gray-300",children:S()})]})]}),(0,r.jsxs)("div",{className:" absolute right-0 mt-2 w-48 bg-black/80 backdrop-blur-sm rounded-md shadow-lg py-1 border border-white/10 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 ",children:[(null==n?void 0:n.is_admin)&&(0,r.jsxs)("button",{onClick:P,className:"flex px-4 py-2 w-full text-left hover:bg-white/10 text-gray-200",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"})," Dashboard"]}),"Gratis"===S()&&!(null==n?void 0:n.is_admin)&&(0,r.jsxs)(a(),{href:"/upgrade",className:"flex px-4 py-2 hover:bg-white/10 text-gray-200",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-2"})," Upgrade"]}),(0,r.jsxs)(a(),{href:"/profile",className:"flex px-4 py-2 hover:bg-white/10 text-gray-200",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-2"})," Profile"]}),(0,r.jsxs)("button",{onClick:O,className:"flex w-full px-4 py-2 hover:bg-white/10 text-gray-200",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(a(),{href:"/login",className:"btn btn-ghost btn-sm text-white",children:"Sign In"}),(0,r.jsx)(a(),{href:"/register",className:"btn btn-primary btn-sm",children:"Sign Up"})]})}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)("button",{onClick:()=>s(!e),className:"btn btn-ghost p-1 text-white",children:e?(0,r.jsx)(b.Z,{className:"h-7 w-7"}):(0,r.jsx)(p.Z,{className:"h-7 w-7"})})})]}),e&&(0,r.jsxs)("div",{className:"md:hidden bg-black/40 backdrop-blur-sm pb-4 pt-2 px-3 space-y-1 border-t border-white/10",children:[Z.map(e=>{let t=E===e.href||"/dashboard"===e.href&&E.startsWith("/dashboard");return(0,r.jsx)("button",{onClick:()=>{s(!1),C.push(e.href)},className:"\n                    block w-full text-left px-3 py-3 rounded-md transition-all duration-200\n                    ".concat(t?"bg-white/20 text-white font-semibold":"text-gray-200 hover:bg-white/10","\n                  "),children:e.name},e.name)}),(0,r.jsx)("div",{className:"pt-3 border-t border-white/20",children:l?(0,r.jsx)("div",{className:"bg-white/20 h-10 w-full rounded animate-pulse"}):t?(0,r.jsxs)("div",{className:"space-y-2 text-white",children:[(0,r.jsxs)("div",{className:"flex items-center px-2 py-2 space-x-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 bg-white/20 rounded-full flex items-center justify-center",children:(null==n?void 0:n.avatar_url)?(0,r.jsx)("img",{src:n.avatar_url,className:"h-10 w-10 rounded-full"}):(0,r.jsx)(u.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:null==n?void 0:n.full_name}),(0,r.jsx)("div",{className:"text-sm text-gray-300",children:S()})]})]}),(null==n?void 0:n.is_admin)&&(0,r.jsx)("button",{onClick:()=>{s(!1),P()},className:"block w-full text-left px-3 py-3 rounded-md hover:bg-white/10",children:"Dashboard"}),"Gratis"===S()&&!(null==n?void 0:n.is_admin)&&(0,r.jsx)(a(),{href:"/upgrade",className:"block px-3 py-3 rounded-md hover:bg-white/10",children:"Upgrade"}),(0,r.jsx)(a(),{href:"/profile",className:"block px-3 py-3 rounded-md hover:bg-white/10",children:"Profile"}),(0,r.jsx)("button",{onClick:()=>{O(),s(!1)},className:"block w-full text-left px-3 py-3 rounded-md hover:bg-white/10",children:"Sign Out"})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(a(),{href:"/login",className:"block px-3 py-3 rounded-md text-white hover:bg-white/10",children:"Sign In"}),(0,r.jsx)(a(),{href:"/register",className:"block px-3 py-3 rounded-md bg-primary-600 text-white",children:"Sign Up"})]})})]})]})})}},1122:function(e,s,t){"use strict";t.r(s),t.d(s,{AuthProvider:function(){return l},useAuth:function(){return o}});var r=t(7437),i=t(2265),n=t(1097);let a=(0,i.createContext)(void 0);function l(e){let{children:s}=e,[t,l]=(0,i.useState)(null),[o,c]=(0,i.useState)(null),[d,h]=(0,i.useState)(!0),u=(0,n.e)();(0,i.useEffect)(()=>{let e=async e=>{try{let{data:s,error:t}=await u.from("profiles").select("*").eq("id",e).single();t?console.error("Error fetching profile:",t):c(s)}catch(e){console.error("Error in fetchProfile:",e)}};(async()=>{try{let{data:{session:s},error:t}=await u.auth.getSession();t?console.error("Error getting session:",t):(null==s?void 0:s.user)&&(l(s.user),await e(s.user.id))}catch(e){console.error("Error in getInitialSession:",e)}finally{h(!1)}})();let{data:{subscription:s}}=u.auth.onAuthStateChange(async(s,t)=>{"SIGNED_IN"===s&&(null==t?void 0:t.user)?(l(t.user),await e(t.user.id)):"SIGNED_OUT"===s&&(l(null),c(null)),h(!1)});return()=>{s.unsubscribe()}},[u.auth]);let m=async()=>{try{let{error:e}=await u.auth.signOut();e&&console.error("Error signing out:",e)}catch(e){console.error("Error in signOut:",e)}},x=async()=>{if(t)try{let{data:e,error:s}=await u.from("profiles").select("*").eq("id",t.id).single();s?console.error("Error refreshing profile:",s):c(e)}catch(e){console.error("Error in refreshProfile:",e)}};return(0,r.jsx)(a.Provider,{value:{user:t,profile:o,loading:d,signOut:m,refreshProfile:x},children:s})}function o(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1097:function(e,s,t){"use strict";t.d(s,{e:function(){return i}});var r=t(3082);let i=()=>(0,r.createClientComponentClient)()},3385:function(){}},function(e){e.O(0,[872,82,250,428,971,938,744],function(){return e(e.s=9502)}),_N_E=e.O()}]);